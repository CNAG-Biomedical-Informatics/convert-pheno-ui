{"version":3,"file":"static/js/6475.705e5d69.chunk.js","mappings":"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","sources":["keycloak-theme/login/pages/Terms.tsx","../node_modules/evt/src/hooks/index.ts","../node_modules/evt/src/hooks/useEvt.ts","../node_modules/evt/src/hooks/useRerenderOnStateChange.ts"],"sourcesContent":["import { clsx } from \"keycloakify/tools/clsx\";\nimport { useRerenderOnStateChange } from \"evt/hooks\";\nimport { Markdown } from \"keycloakify/tools/Markdown\";\nimport type { PageProps } from \"keycloakify/login/pages/PageProps\";\nimport { useGetClassName } from \"keycloakify/login/lib/useGetClassName\";\nimport { evtTermMarkdown } from \"keycloakify/login/lib/useDownloadTerms\";\nimport type { KcContext } from \"../kcContext\";\nimport type { I18n } from \"../i18n\";\nimport { useDownloadTerms } from \"keycloakify/login\";\nimport tos_en_url from \"../assets/tos_en.md\";\nimport tos_fr_url from \"../assets/tos_fr.md\";\n\nexport default function Terms(props: PageProps<Extract<KcContext, { pageId: \"terms.ftl\" }>, I18n>) {\n    const { kcContext, i18n, doUseDefaultCss, Template, classes } = props;\n\n    const { getClassName } = useGetClassName({\n        doUseDefaultCss,\n        classes\n    });\n\n    const { msg, msgStr } = i18n;\n\n    // NOTE: If you aren't going to customize the layout of the page you can move this hook to \n    // KcApp.tsx, see: https://docs.keycloakify.dev/terms-and-conditions\n    useDownloadTerms({\n        kcContext,\n        \"downloadTermMarkdown\": async ({currentLanguageTag}) => {\n\n            const tos_url = (() => {\n                switch (currentLanguageTag) {\n                    case \"fr\": return tos_fr_url;\n                    default: return tos_en_url;\n                }\n            })();\n\n\n            if (\"__STORYBOOK_ADDONS\" in window) {\n                // NOTE: In storybook, when you import a .md file you get the content of the file.\n                // In Create React App on the other hand you get an url to the file.\n                return tos_url;\n            }\n\n            const markdownString = await fetch(tos_url).then(response => response.text());\n\n            return markdownString;\n\n        }\n    });\n\n    useRerenderOnStateChange(evtTermMarkdown);\n\n    const { url } = kcContext;\n\n    const termMarkdown = evtTermMarkdown.state;\n\n    if (termMarkdown === undefined) {\n        return null;\n    }\n\n    return (\n        <Template {...{ kcContext, i18n, doUseDefaultCss, classes }} displayMessage={false} headerNode={msg(\"termsTitle\")}>\n            <div id=\"kc-terms-text\">\n                <Markdown>{termMarkdown}</Markdown>\n            </div>\n            <form className=\"form-actions\" action={url.loginAction} method=\"POST\">\n                <input\n                    className={clsx(\n                        getClassName(\"kcButtonClass\"),\n                        getClassName(\"kcButtonClass\"),\n                        getClassName(\"kcButtonClass\"),\n                        getClassName(\"kcButtonPrimaryClass\"),\n                        getClassName(\"kcButtonLargeClass\")\n                    )}\n                    name=\"accept\"\n                    id=\"kc-accept\"\n                    type=\"submit\"\n                    value={msgStr(\"doAccept\")}\n                />\n                <input\n                    className={clsx(getClassName(\"kcButtonClass\"), getClassName(\"kcButtonDefaultClass\"), getClassName(\"kcButtonLargeClass\"))}\n                    name=\"cancel\"\n                    id=\"kc-decline\"\n                    type=\"submit\"\n                    value={msgStr(\"doDecline\")}\n                />\n            </form>\n            <div className=\"clearfix\" />\n        </Template>\n    );\n}\n","/*\nNOTE: In theory react should be a peer dependency\ninstead of a dev dependency.\nBut given that /hook is just a plugin for using Evt\nwith react we don't want to require react to be\ninstalled to install Evt.\n*/\nexport { useEvt } from \"./useEvt\";\nexport { useRerenderOnStateChange } from \"./useRerenderOnStateChange\";","import { Evt } from \"../lib\";\nimport type { Ctx } from \"../lib\";\nimport * as React from \"react\";\nconst { useEffect } = React;\n\n\n/**\n * https://docs.evt.land/api/react-hooks\n * \n * Provide a Ctx to attach handlers.\n * You should list in deps all the Evt that are\n * susceptible to change ( Evt passed as props \n * or Evt that are react states ) that you use in the\n * factoryOrEffect callback. \n * As for useEffect you should also list every other\n * value that you use.\n * Whenever any value in deps is changed factoryOrEffect\n * is invoked again with the new Evt and the previous handler\n * get detached.\n * All handler are also detached when the component unmount.\n * \n * factoryOrEffect can be used for attaching handler to event\n * or to generate a new event that is a merge/pipe of other \n * Evts.\n * \n * BE AWARE: Unlike useEffect factoryOrEffect is called \n * on render ( like useMemo's callback ).\n * Remember that you shouldn't update state in a component \n * render tick (in the useMemo for example). If you you need to \n * perform an effect on first render (attaching a stateful evt\n * for example) use registerSideEffect(()=>{ ... })\n * \n * Demo: https://docs.evt.land/react-hooks#useevt\n */\nexport function useEvt(\n    effect: (ctx: Ctx) => void,\n    deps?: React.DependencyList\n): void {\n\n    useEffect(\n        ()=> {\n            const ctx= Evt.newCtx();\n\n            effect(ctx);\n\n            return ()=> { ctx.done(); };\n        },\n        deps\n    );\n\n}\n","import { useEvt } from \"./useEvt\";\nimport * as React from \"react\";\nconst { useState } = React;\n\ntype CtxLike<Result = any> = import(\"../lib/types/interfaces/CtxLike\").CtxLike<Result>;\n\ninterface StatefulReadonlyEvtLike {\n    state: unknown;\n    attach: (ctx: CtxLike, cb: (state: unknown)=> void)=> void;\n};\n\n/**\n * https://docs.evt.land/react-hooks#usererenderonstatechange\n * \n * To use StatefulEvt as react component state.\n * */\nexport function useRerenderOnStateChange(evt: StatefulReadonlyEvtLike): void {\n\n    //NOTE: We use function in case the state is a function\n    const [, setState] = useState(() => evt.state);\n\n    useEvt(\n        ctx =>\n            evt.attach(ctx, state => setState(() => state)),\n        [evt]\n    );\n}\n"],"names":["Terms","props","kcContext","i18n","doUseDefaultCss","Template","classes","getClassName","useGetClassName","msg","msgStr","useDownloadTerms","_downloadTermMarkdown","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref","currentLanguageTag","tos_url","markdownString","wrap","_context","prev","next","tos_fr_url","tos_en_url","window","abrupt","fetch","then","response","text","sent","stop","_x","apply","arguments","useRerenderOnStateChange","evtTermMarkdown","url","termMarkdown","undefined","_jsxs","displayMessage","headerNode","children","_jsx","id","Markdown","className","action","loginAction","method","clsx","name","type","value","useEvt_1","require","useRerenderOnStateChange_1","Object","enumerable","get","lib_1","useEffect","__importStar","exports","effect","deps","ctx","Evt","newCtx","done","useState","evt","setState","__read","state","useEvt","attach"],"sourceRoot":""}
